{"version":3,"file":"virtual-list-item.mjs","sources":["../../../../src/components/virtual-list/virtual-list-item.tsx"],"sourcesContent":["import classNames from 'classnames';\nimport React, { FC, ReactNode, useRef, useEffect, useMemo } from 'react';\nimport './style.scss';\n\n// 定义组件Props接口\ninterface VirtualListItemProps {\n    /** 子元素 */\n    children?: ReactNode;\n    /** 索引 */\n    index?: number;\n    itemKey: number | string;\n    /** 样式 */\n    style?: React.CSSProperties;\n    itemWrapperClass?: string;\n    onSizeChange: (index: number, domNode: ChildNode) => void;\n}\n\n// 虚拟列表项组件\nconst VirtualListItem: FC<VirtualListItemProps> = ({\n    children,\n    itemKey = 0,\n    style,\n    index = 0,\n    onSizeChange,\n    itemWrapperClass = '',\n}) => {\n    const virtualItemRef = useRef<HTMLDivElement>(null);\n    const resizeObserver = useRef<ResizeObserver | null>(null);\n\n    useEffect(() => {\n        if (virtualItemRef.current) {\n            const domNode = virtualItemRef.current.firstChild as Element; // 获取当前item并转换为Element类型\n            if (!domNode) return;\n            // 初始化ResizeObserver，监听domNode尺寸变化\n            resizeObserver.current = new ResizeObserver(() => {\n                window.requestAnimationFrame(() => {\n                    onSizeChange(index, domNode);\n                });\n            });\n            resizeObserver.current.observe(domNode); // 开始监听domNode尺寸变化\n        }\n        return () => {\n            // 组件卸载时，停止监听domNode尺寸变化\n            if (resizeObserver.current) {\n                resizeObserver.current.disconnect();\n            }\n        };\n    }, []);\n\n    const itemWrapperClassName = useMemo(() => {\n        return classNames('verney-virtual-list__item', itemWrapperClass);\n    }, [itemWrapperClass]);\n    return (\n        <div ref={virtualItemRef} className={itemWrapperClassName} data-key={itemKey} style={style}>\n            {children}\n        </div>\n    );\n};\n\nexport default VirtualListItem;\n"],"names":["useRef","useEffect","useMemo","jsx"],"mappings":";;;;;;AAkBA,MAAM,kBAA4C,CAAC;AAAA,EAC/C;AAAA,EACA,UAAU;AAAA,EACV;AAAA,EACA,QAAQ;AAAA,EACR;AAAA,EACA,mBAAmB;AACvB,MAAM;AACI,QAAA,iBAAiBA,kBAAuB,IAAI;AAC5C,QAAA,iBAAiBA,kBAA8B,IAAI;AAEzDC,aAAAA,UAAU,MAAM;AACZ,QAAI,eAAe,SAAS;AAClB,YAAA,UAAU,eAAe,QAAQ;AACvC,UAAI,CAAC,QAAS;AAEC,qBAAA,UAAU,IAAI,eAAe,MAAM;AAC9C,eAAO,sBAAsB,MAAM;AAC/B,uBAAa,OAAO,OAAO;AAAA,QAAA,CAC9B;AAAA,MAAA,CACJ;AACc,qBAAA,QAAQ,QAAQ,OAAO;AAAA,IAAA;AAE1C,WAAO,MAAM;AAET,UAAI,eAAe,SAAS;AACxB,uBAAe,QAAQ,WAAW;AAAA,MAAA;AAAA,IAE1C;AAAA,EACJ,GAAG,EAAE;AAEC,QAAA,uBAAuBC,WAAAA,QAAQ,MAAM;AAChC,WAAA,WAAW,6BAA6B,gBAAgB;AAAA,EAAA,GAChE,CAAC,gBAAgB,CAAC;AAEjB,SAAAC,iDAAC,SAAI,KAAK,gBAAgB,WAAW,sBAAsB,YAAU,SAAS,OACzE,SACL,CAAA;AAER;;"}