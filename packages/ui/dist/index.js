"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const c=require("react");function Rr(t){const i=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(t){for(const a in t)if(a!=="default"){const f=Object.getOwnPropertyDescriptor(t,a);Object.defineProperty(i,a,f.get?f:{enumerable:!0,get:()=>t[a]})}}return i.default=t,Object.freeze(i)}const ce=Rr(c);function Er(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ge={exports:{}},le={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ye;function _r(){if(Ye)return le;Ye=1;var t=c,i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),f=Object.prototype.hasOwnProperty,y=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function d(u,v,T){var l,E={},_=null,F=null;T!==void 0&&(_=""+T),v.key!==void 0&&(_=""+v.key),v.ref!==void 0&&(F=v.ref);for(l in v)f.call(v,l)&&!s.hasOwnProperty(l)&&(E[l]=v[l]);if(u&&u.defaultProps)for(l in v=u.defaultProps,v)E[l]===void 0&&(E[l]=v[l]);return{$$typeof:i,type:u,key:_,ref:F,props:E,_owner:y.current}}return le.Fragment=a,le.jsx=d,le.jsxs=d,le}var fe={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Le;function wr(){return Le||(Le=1,process.env.NODE_ENV!=="production"&&function(){var t=c,i=Symbol.for("react.element"),a=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),d=Symbol.for("react.provider"),u=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),l=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),F=Symbol.for("react.offscreen"),Y=Symbol.iterator,J="@@iterator";function C(e){if(e===null||typeof e!="object")return null;var r=Y&&e[Y]||e[J];return typeof r=="function"?r:null}var P=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function m(e){{for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];$("error",e,n)}}function $(e,r,n){{var o=P.ReactDebugCurrentFrame,w=o.getStackAddendum();w!==""&&(r+="%s",n=n.concat([w]));var O=n.map(function(b){return String(b)});O.unshift("Warning: "+r),Function.prototype.apply.call(console[e],console,O)}}var H=!1,V=!1,L=!1,ee=!1,x=!1,S;S=Symbol.for("react.module.reference");function k(e){return!!(typeof e=="string"||typeof e=="function"||e===f||e===s||x||e===y||e===T||e===l||ee||e===F||H||V||L||typeof e=="object"&&e!==null&&(e.$$typeof===_||e.$$typeof===E||e.$$typeof===d||e.$$typeof===u||e.$$typeof===v||e.$$typeof===S||e.getModuleId!==void 0))}function h(e,r,n){var o=e.displayName;if(o)return o;var w=r.displayName||r.name||"";return w!==""?n+"("+w+")":n}function R(e){return e.displayName||"Context"}function p(e){if(e==null)return null;if(typeof e.tag=="number"&&m("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case f:return"Fragment";case a:return"Portal";case s:return"Profiler";case y:return"StrictMode";case T:return"Suspense";case l:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case u:var r=e;return R(r)+".Consumer";case d:var n=e;return R(n._context)+".Provider";case v:return h(e,e.render,"ForwardRef");case E:var o=e.displayName||null;return o!==null?o:p(e.type)||"Memo";case _:{var w=e,O=w._payload,b=w._init;try{return p(b(O))}catch{return null}}}return null}var I=Object.assign,W=0,G,N,U,re,oe,j,z;function K(){}K.__reactDisabledLog=!0;function X(){{if(W===0){G=console.log,N=console.info,U=console.warn,re=console.error,oe=console.group,j=console.groupCollapsed,z=console.groupEnd;var e={configurable:!0,enumerable:!0,value:K,writable:!0};Object.defineProperties(console,{info:e,log:e,warn:e,error:e,group:e,groupCollapsed:e,groupEnd:e})}W++}}function ne(){{if(W--,W===0){var e={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:I({},e,{value:G}),info:I({},e,{value:N}),warn:I({},e,{value:U}),error:I({},e,{value:re}),group:I({},e,{value:oe}),groupCollapsed:I({},e,{value:j}),groupEnd:I({},e,{value:z})})}W<0&&m("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var Z=P.ReactCurrentDispatcher,be;function de(e,r,n){{if(be===void 0)try{throw Error()}catch(w){var o=w.stack.trim().match(/\n( *(at )?)/);be=o&&o[1]||""}return`
`+be+e}}var ye=!1,ve;{var Ke=typeof WeakMap=="function"?WeakMap:Map;ve=new Ke}function Oe(e,r){if(!e||ye)return"";{var n=ve.get(e);if(n!==void 0)return n}var o;ye=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var O;O=Z.current,Z.current=null,X();try{if(r){var b=function(){throw Error()};if(Object.defineProperty(b.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(b,[])}catch(q){o=q}Reflect.construct(e,[],b)}else{try{b.call()}catch(q){o=q}e.call(b.prototype)}}else{try{throw Error()}catch(q){o=q}e()}}catch(q){if(q&&o&&typeof q.stack=="string"){for(var g=q.stack.split(`
`),B=o.stack.split(`
`),D=g.length-1,A=B.length-1;D>=1&&A>=0&&g[D]!==B[A];)A--;for(;D>=1&&A>=0;D--,A--)if(g[D]!==B[A]){if(D!==1||A!==1)do if(D--,A--,A<0||g[D]!==B[A]){var Q=`
`+g[D].replace(" at new "," at ");return e.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",e.displayName)),typeof e=="function"&&ve.set(e,Q),Q}while(D>=1&&A>=0);break}}}finally{ye=!1,Z.current=O,ne(),Error.prepareStackTrace=w}var ae=e?e.displayName||e.name:"",te=ae?de(ae):"";return typeof e=="function"&&ve.set(e,te),te}function Ge(e,r,n){return Oe(e,!1)}function Xe(e){var r=e.prototype;return!!(r&&r.isReactComponent)}function pe(e,r,n){if(e==null)return"";if(typeof e=="function")return Oe(e,Xe(e));if(typeof e=="string")return de(e);switch(e){case T:return de("Suspense");case l:return de("SuspenseList")}if(typeof e=="object")switch(e.$$typeof){case v:return Ge(e.render);case E:return pe(e.type,r,n);case _:{var o=e,w=o._payload,O=o._init;try{return pe(O(w),r,n)}catch{}}}return""}var ue=Object.prototype.hasOwnProperty,Ce={},je=P.ReactDebugCurrentFrame;function he(e){if(e){var r=e._owner,n=pe(e.type,e._source,r?r.type:null);je.setExtraStackFrame(n)}else je.setExtraStackFrame(null)}function Qe(e,r,n,o,w){{var O=Function.call.bind(ue);for(var b in e)if(O(e,b)){var g=void 0;try{if(typeof e[b]!="function"){var B=Error((o||"React class")+": "+n+" type `"+b+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[b]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw B.name="Invariant Violation",B}g=e[b](r,b,o,n,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(D){g=D}g&&!(g instanceof Error)&&(he(w),m("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",o||"React class",n,b,typeof g),he(null)),g instanceof Error&&!(g.message in Ce)&&(Ce[g.message]=!0,he(w),m("Failed %s type: %s",n,g.message),he(null))}}}var Ze=Array.isArray;function Re(e){return Ze(e)}function er(e){{var r=typeof Symbol=="function"&&Symbol.toStringTag,n=r&&e[Symbol.toStringTag]||e.constructor.name||"Object";return n}}function rr(e){try{return Pe(e),!1}catch{return!0}}function Pe(e){return""+e}function ke(e){if(rr(e))return m("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",er(e)),Pe(e)}var Ie=P.ReactCurrentOwner,tr={key:!0,ref:!0,__self:!0,__source:!0},De,$e;function nr(e){if(ue.call(e,"ref")){var r=Object.getOwnPropertyDescriptor(e,"ref").get;if(r&&r.isReactWarning)return!1}return e.ref!==void 0}function sr(e){if(ue.call(e,"key")){var r=Object.getOwnPropertyDescriptor(e,"key").get;if(r&&r.isReactWarning)return!1}return e.key!==void 0}function ar(e,r){typeof e.ref=="string"&&Ie.current}function ir(e,r){{var n=function(){De||(De=!0,m("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",r))};n.isReactWarning=!0,Object.defineProperty(e,"key",{get:n,configurable:!0})}}function or(e,r){{var n=function(){$e||($e=!0,m("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",r))};n.isReactWarning=!0,Object.defineProperty(e,"ref",{get:n,configurable:!0})}}var ur=function(e,r,n,o,w,O,b){var g={$$typeof:i,type:e,key:r,ref:n,props:b,_owner:O};return g._store={},Object.defineProperty(g._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(g,"_self",{configurable:!1,enumerable:!1,writable:!1,value:o}),Object.defineProperty(g,"_source",{configurable:!1,enumerable:!1,writable:!1,value:w}),Object.freeze&&(Object.freeze(g.props),Object.freeze(g)),g};function cr(e,r,n,o,w){{var O,b={},g=null,B=null;n!==void 0&&(ke(n),g=""+n),sr(r)&&(ke(r.key),g=""+r.key),nr(r)&&(B=r.ref,ar(r,w));for(O in r)ue.call(r,O)&&!tr.hasOwnProperty(O)&&(b[O]=r[O]);if(e&&e.defaultProps){var D=e.defaultProps;for(O in D)b[O]===void 0&&(b[O]=D[O])}if(g||B){var A=typeof e=="function"?e.displayName||e.name||"Unknown":e;g&&ir(b,A),B&&or(b,A)}return ur(e,g,B,w,o,Ie.current,b)}}var Ee=P.ReactCurrentOwner,Ne=P.ReactDebugCurrentFrame;function se(e){if(e){var r=e._owner,n=pe(e.type,e._source,r?r.type:null);Ne.setExtraStackFrame(n)}else Ne.setExtraStackFrame(null)}var _e;_e=!1;function we(e){return typeof e=="object"&&e!==null&&e.$$typeof===i}function Ae(){{if(Ee.current){var e=p(Ee.current.type);if(e)return`

Check the render method of \``+e+"`."}return""}}function lr(e){return""}var Me={};function fr(e){{var r=Ae();if(!r){var n=typeof e=="string"?e:e.displayName||e.name;n&&(r=`

Check the top-level render call using <`+n+">.")}return r}}function Fe(e,r){{if(!e._store||e._store.validated||e.key!=null)return;e._store.validated=!0;var n=fr(r);if(Me[n])return;Me[n]=!0;var o="";e&&e._owner&&e._owner!==Ee.current&&(o=" It was passed a child from "+p(e._owner.type)+"."),se(e),m('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',n,o),se(null)}}function Ve(e,r){{if(typeof e!="object")return;if(Re(e))for(var n=0;n<e.length;n++){var o=e[n];we(o)&&Fe(o,r)}else if(we(e))e._store&&(e._store.validated=!0);else if(e){var w=C(e);if(typeof w=="function"&&w!==e.entries)for(var O=w.call(e),b;!(b=O.next()).done;)we(b.value)&&Fe(b.value,r)}}}function dr(e){{var r=e.type;if(r==null||typeof r=="string")return;var n;if(typeof r=="function")n=r.propTypes;else if(typeof r=="object"&&(r.$$typeof===v||r.$$typeof===E))n=r.propTypes;else return;if(n){var o=p(r);Qe(n,e.props,"prop",o,e)}else if(r.PropTypes!==void 0&&!_e){_e=!0;var w=p(r);m("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",w||"Unknown")}typeof r.getDefaultProps=="function"&&!r.getDefaultProps.isReactClassApproved&&m("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function vr(e){{for(var r=Object.keys(e.props),n=0;n<r.length;n++){var o=r[n];if(o!=="children"&&o!=="key"){se(e),m("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",o),se(null);break}}e.ref!==null&&(se(e),m("Invalid attribute `ref` supplied to `React.Fragment`."),se(null))}}var We={};function ze(e,r,n,o,w,O){{var b=k(e);if(!b){var g="";(e===void 0||typeof e=="object"&&e!==null&&Object.keys(e).length===0)&&(g+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var B=lr();B?g+=B:g+=Ae();var D;e===null?D="null":Re(e)?D="array":e!==void 0&&e.$$typeof===i?(D="<"+(p(e.type)||"Unknown")+" />",g=" Did you accidentally export a JSX literal instead of a component?"):D=typeof e,m("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",D,g)}var A=cr(e,r,n,w,O);if(A==null)return A;if(b){var Q=r.children;if(Q!==void 0)if(o)if(Re(Q)){for(var ae=0;ae<Q.length;ae++)Ve(Q[ae],e);Object.freeze&&Object.freeze(Q)}else m("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else Ve(Q,e)}if(ue.call(r,"key")){var te=p(e),q=Object.keys(r).filter(function(yr){return yr!=="key"}),xe=q.length>0?"{key: someKey, "+q.join(": ..., ")+": ...}":"{key: someKey}";if(!We[te+xe]){var br=q.length>0?"{"+q.join(": ..., ")+": ...}":"{}";m(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,xe,te,br,te),We[te+xe]=!0}}return e===f?vr(A):dr(A),A}}function pr(e,r,n){return ze(e,r,n,!0)}function hr(e,r,n){return ze(e,r,n,!1)}var gr=hr,mr=pr;fe.Fragment=f,fe.jsx=gr,fe.jsxs=mr}()),fe}var Ue;function xr(){return Ue||(Ue=1,process.env.NODE_ENV==="production"?ge.exports=_r():ge.exports=wr()),ge.exports}var M=xr(),Te={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var Be;function Tr(){return Be||(Be=1,function(t){(function(){var i={}.hasOwnProperty;function a(){for(var s="",d=0;d<arguments.length;d++){var u=arguments[d];u&&(s=y(s,f(u)))}return s}function f(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return a.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var d="";for(var u in s)i.call(s,u)&&s[u]&&(d=y(d,u));return d}function y(s,d){return d?s?s+" "+d:s+d:s}t.exports?(a.default=a,t.exports=a):window.classNames=a})()}(Te)),Te.exports}var Sr=Tr();const ie=Er(Sr),Or=({type:t="default",size:i="middle",shape:a="default",loading:f=!1,disabled:y=!1,danger:s=!1,block:d=!1,icon:u,htmlType:v="button",className:T,children:l,...E})=>{const _="verney-btn",F=ie(_,T,{[`${_}-${t}`]:t,[`${_}-${a}`]:a!=="default",[`${_}-${i}`]:i!=="middle",[`${_}-loading`]:f,[`${_}-danger`]:s,[`${_}-block`]:d,[`${_}-disabled`]:y}),Y=f?M.jsx("span",{className:`${_}-loading-icon`}):u;return M.jsxs("button",{...E,type:v,className:F,disabled:y||f,children:[Y,l&&M.jsx("span",{children:l})]})},qe=c.forwardRef((t,i)=>{const{className:a,size:f="middle",disabled:y=!1,status:s,bordered:d=!0,prefix:u,suffix:v,allowClear:T,...l}=t,E=ie("verney-input",{[`verney-input-${f}`]:f,"verney-input-disabled":y,[`verney-input-${s}`]:s,"verney-input-borderless":!d},a);return M.jsxs("div",{className:"verney-input-wrapper",children:[u&&M.jsx("span",{className:"verney-input-prefix",children:u}),M.jsx("input",{ref:i,className:E,disabled:y,...l}),(v||T)&&M.jsxs("span",{className:"verney-input-suffix",children:[T&&l.value&&M.jsx("button",{type:"button",className:"verney-input-clear-icon",onClick:()=>{if(l.onChange){const _=new Event("input",{bubbles:!0});_.target={value:""},l.onChange(_)}},children:"×"}),v]})]})});qe.displayName="Input";var Se=new Map,me=new WeakMap,He=0,Cr=void 0;function jr(t){return t?(me.has(t)||(He+=1,me.set(t,He.toString())),me.get(t)):"0"}function Pr(t){return Object.keys(t).sort().filter(i=>t[i]!==void 0).map(i=>`${i}_${i==="root"?jr(t.root):t[i]}`).toString()}function kr(t){const i=Pr(t);let a=Se.get(i);if(!a){const f=new Map;let y;const s=new IntersectionObserver(d=>{d.forEach(u=>{var v;const T=u.isIntersecting&&y.some(l=>u.intersectionRatio>=l);t.trackVisibility&&typeof u.isVisible>"u"&&(u.isVisible=T),(v=f.get(u.target))==null||v.forEach(l=>{l(T,u)})})},t);y=s.thresholds||(Array.isArray(t.threshold)?t.threshold:[t.threshold||0]),a={id:i,observer:s,elements:f},Se.set(i,a)}return a}function Ir(t,i,a={},f=Cr){if(typeof window.IntersectionObserver>"u"&&f!==void 0){const v=t.getBoundingClientRect();return i(f,{isIntersecting:f,target:t,intersectionRatio:typeof a.threshold=="number"?a.threshold:0,time:0,boundingClientRect:v,intersectionRect:v,rootBounds:v}),()=>{}}const{id:y,observer:s,elements:d}=kr(a),u=d.get(t)||[];return d.has(t)||d.set(t,u),u.push(i),s.observe(t),function(){u.splice(u.indexOf(i),1),u.length===0&&(d.delete(t),s.unobserve(t)),d.size===0&&(s.disconnect(),Se.delete(y))}}function Dr({threshold:t,delay:i,trackVisibility:a,rootMargin:f,root:y,triggerOnce:s,skip:d,initialInView:u,fallbackInView:v,onChange:T}={}){var l;const[E,_]=ce.useState(null),F=ce.useRef(T),[Y,J]=ce.useState({inView:!!u,entry:void 0});F.current=T,ce.useEffect(()=>{if(d||!E)return;let $;return $=Ir(E,(H,V)=>{J({inView:H,entry:V}),F.current&&F.current(H,V),V.isIntersecting&&s&&$&&($(),$=void 0)},{root:y,rootMargin:f,threshold:t,trackVisibility:a,delay:i},v),()=>{$&&$()}},[Array.isArray(t)?t.toString():t,E,y,f,s,d,a,v,i]);const C=(l=Y.entry)==null?void 0:l.target,P=ce.useRef(void 0);!E&&C&&!s&&!d&&P.current!==C&&(P.current=C,J({inView:!!u,entry:void 0}));const m=[_,Y.inView,Y.entry];return m.ref=m[0],m.inView=m[1],m.entry=m[2],m}const Je=({dataSource:t=[],columns:i=2,gutter:a=16,defaultItemHeight:f=200,enableAnimation:y=!0,animationDuration:s=300,animationEasing:d="ease-out",renderItem:u,className:v,style:T,loading:l=!1,hasMore:E=!0,onLoadMore:_,loadingComponent:F="加载中...",noMoreComponent:Y="没有更多了"})=>{const J=c.useRef(null),[C,P]=c.useState([]),[m,$]=c.useState([]),[H,V]=c.useState([]),L=c.useRef(new Map),ee=c.useRef(!1),x=c.useRef(l),S=c.useRef(null),k=c.useRef(new Set),h=c.useRef({tasks:[],isProcessing:!1}),R=c.useCallback(j=>{h.current.tasks.push(j),h.current.isProcessing||p()},[]),p=c.useCallback(async()=>{if(h.current.isProcessing||h.current.tasks.length===0)return;h.current.isProcessing=!0;const j=h.current.tasks[0];try{await j(),h.current.tasks.shift(),h.current.isProcessing=!1,h.current.tasks.length>0&&p()}catch(z){console.error("Task execution failed:",z),h.current.isProcessing=!1}},[]),I=c.useCallback(j=>async()=>{const z=j.filter((K,X)=>!k.current.has(X));return z.length>0&&V(K=>[...K,...z]),new Promise(K=>{const X=()=>{k.current.size===j.length?K():setTimeout(X,100)};X()})},[]),W=c.useCallback(()=>{S.current&&clearTimeout(S.current),S.current=setTimeout(()=>{!x.current&&E&&_&&!h.current.isProcessing&&R(async()=>{x.current=!0,await _()})},200)},[E,_,R]);c.useEffect(()=>{C.length!==i&&(P(new Array(i).fill(0)),$(new Array(i).fill(0).map(()=>[])),k.current.clear(),L.current.clear());const j=I(t);R(j)},[i,t,I,R,C.length]),c.useEffect(()=>{x.current=l},[l]);const{ref:G,inView:N}=Dr({threshold:1,rootMargin:"0px"});c.useEffect(()=>(console.log("loadMoreInView",N),N&&W(),()=>{S.current&&clearTimeout(S.current)}),[N,W]);const U=c.useCallback(()=>{const j=Math.min(...C);return C.indexOf(j)},[C]),re=c.useCallback((j,z,K)=>{if(L.current.get(j)===z)return;const X=L.current.get(j)||0;L.current.set(j,z),k.current.add(j),P(ne=>{const Z=[...ne];return Z[K]=Z[K]-X+z,Z}),ee.current=!1},[]),oe=c.useCallback(()=>{if(ee.current||H.length===0)return;ee.current=!0;const j=U();if(j>-1){const[z,...K]=H,X=t.indexOf(z);if(k.current.has(X)){V(K),ee.current=!1;return}V(K),$(ne=>{const Z=[...ne];return Z[j]=[...Z[j],M.jsx($r,{item:z,index:X,columnIndex:j,gutter:a,defaultItemHeight:f,enableAnimation:y,animationDuration:s,animationEasing:d,renderItem:u,updateColumnHeight:re},X)],Z})}},[H,C,a,u,t,U,f,re,y,s,d]);return c.useEffect(()=>{ee.current||oe()},[oe,H,ee.current]),M.jsxs("div",{ref:J,className:ie("verney-waterfall",v),style:{display:"grid",gridTemplateColumns:`repeat(${i}, 1fr)`,gap:a,...T},children:[m.map((j,z)=>M.jsx("div",{className:"verney-waterfall-column",children:j},z)),M.jsx("div",{ref:G,className:"verney-waterfall-loader",style:{width:"100%",pointerEvents:"none"},children:l?F:!E&&Y})]})};Je.displayName="Waterfall";const $r=({item:t,index:i,columnIndex:a,gutter:f,defaultItemHeight:y,enableAnimation:s=!0,animationDuration:d=300,animationEasing:u="ease-out",updateColumnHeight:v,renderItem:T})=>{const l=c.useRef(null),[E,_]=c.useState(!1),[F,Y]=c.useState(!1),J=c.useRef(null),C=c.useRef(!1),P=c.useCallback(()=>{if(!C.current&&l.current){C.current=!0;const m=l.current.offsetHeight;m>0&&(v(i,m,a),s?setTimeout(()=>Y(!0),50):Y(!0))}},[i,a,v,s]);return c.useEffect(()=>{if(!l.current)return;const m=l.current.getElementsByTagName("img");if(J.current=setTimeout(()=>{!C.current&&l.current&&P()},200),m.length===0){P();return}let $=0;const H=m.length,V=()=>{$++,$===H&&l.current&&(_(!0),P())};return Array.from(m).forEach(L=>{L.complete?V():(L.addEventListener("load",V),L.addEventListener("error",V))}),()=>{J.current&&clearTimeout(J.current),Array.from(m).forEach(L=>{L.removeEventListener("load",V),L.removeEventListener("error",V)})}},[i,a,y,P]),M.jsx("div",{ref:l,className:"verney-waterfall-item",style:{marginBottom:f,opacity:F?1:0,transform:F?"none":"translateY(20px)",transition:s?`opacity ${d}ms ${u}, transform ${d}ms ${u}`:"none"},children:T==null?void 0:T(t,i)})},Nr=({items:t,height:i,columnCount:a=1,mode:f="list",estimatedItemHeight:y=50,overscan:s=3,loadMoreThreshold:d=100,onLoadMore:u,renderItem:v,isLoading:T=!1,className:l})=>{const E=c.useRef(null),[_,F]=c.useState(0),[Y,J]=c.useState(0),C=c.useRef({measuredDataMap:{},lastMeasuredItemIndex:-1}),P=c.useRef([]);c.useEffect(()=>{P.current=new Array(a).fill(0)},[a]),c.useEffect(()=>{C.current={measuredDataMap:{},lastMeasuredItemIndex:-1},P.current=new Array(a).fill(0),J(x=>x+1)},[t,a]);const m=c.useCallback(()=>{const{measuredDataMap:x,lastMeasuredItemIndex:S}=C.current;let k=0,h=0;if(S>=0){const p=x[S];k=p.offset+p.size}const R=t.length-(S+1);return h=k+R*y,h},[t.length,y]),$=c.useCallback(x=>{const{measuredDataMap:S,lastMeasuredItemIndex:k}=C.current;if(x>k){if(f==="waterfall"){const h=Math.min(...P.current),R=P.current.indexOf(h),p=y,I=h;S[x]={size:p,offset:I,column:R},P.current[R]=I+p}else{let h=0;if(k>=0){const R=S[k];h=R.offset+R.size}S[x]={size:y,offset:h,column:0}}C.current.lastMeasuredItemIndex=x}return S[x]||{size:y,offset:0,column:0}},[y,f,a]),H=c.useCallback(()=>{var G;if(!E.current)return{start:0,end:0};const{clientHeight:x,scrollTop:S}=E.current,{measuredDataMap:k}=C.current;let h=0,R=t.length-1;for(;h<=R;){const N=Math.floor((h+R)/2),U=$(N);if(!U){h=N+1;continue}if(typeof U.offset>"u"){h=N+1;continue}if(U.offset<S){if(U.offset+U.size>S){h=N;break}h=N+1}else R=N-1}let p=h,I=((G=k[h])==null?void 0:G.offset)||0;for(;p<t.length&&I<S+x;){const N=$(p);I=N.offset+N.size,p++}const W=Math.max(0,h-s);return p=Math.min(t.length-1,p+s),{start:W,end:p}},[t.length,s,$]),V=c.useCallback(()=>{if(!E.current)return;const{scrollTop:x,scrollHeight:S,clientHeight:k}=E.current;F(x),u&&!T&&S-x-k<d&&u()},[u,T,d]),L=c.useMemo(()=>{const x=H(),S=x?x.start:0,k=x?x.end:0,h=[];for(let R=S;R<=k;R++){const p=$(R),I=t[R];if(!I)continue;const W=f==="waterfall"?{width:`${100/a}%`,position:"absolute",left:`${((p==null?void 0:p.column)||0)*100/a}%`,top:`${(p==null?void 0:p.offset)||0}px`,padding:"8px",boxSizing:"border-box"}:{position:"absolute",left:0,right:0,top:`${(p==null?void 0:p.offset)||0}px`,padding:"8px",boxSizing:"border-box"};h.push(M.jsx("div",{className:ie("verney-virtual-list-item",{"verney-virtual-list-item-waterfall":f==="waterfall"}),"data-index":R,style:W,children:v(I,R)},R))}return h},[t,_,Y,a,f,v,$,H]);c.useEffect(()=>{if(!E.current)return;const x=new ResizeObserver(k=>{let h=!1;k.forEach(R=>{var I;const p=Number(R.target.getAttribute("data-index"));if(!isNaN(p)){const W=((I=C.current.measuredDataMap[p])==null?void 0:I.size)||0,G=R.contentRect.height;if(W!==G){const N=C.current.measuredDataMap[p];if(N.size=G,f==="waterfall"&&N.column!==void 0)P.current[N.column]+=G-W;else for(let U=p+1;U<=C.current.lastMeasuredItemIndex;U++){const re=C.current.measuredDataMap[U];re&&(re.offset+=G-W)}h=!0}}}),h&&J(R=>R+1)}),S=E.current.getElementsByClassName("verney-virtual-list-item");return Array.from(S).forEach(k=>{x.observe(k)}),()=>{x.disconnect()}},[_,f]);const ee=m();return M.jsx("div",{className:"verney-virtual-list",children:M.jsxs("div",{ref:E,className:ie("verney-virtual-list-container",l),style:{height:i,width:"100%"},onScroll:V,children:[M.jsx("div",{className:"verney-virtual-list-content",style:{height:ee,width:"100%"},children:M.jsx("div",{className:ie("verney-virtual-list-items",{"verney-virtual-list-items-waterfall":f==="waterfall"}),style:{width:"100%",position:"relative"},children:L})}),T&&M.jsx("div",{className:"verney-virtual-list-loading",children:"加载中..."})]})})};exports.Button=Or;exports.Input=qe;exports.VirtualList=Nr;exports.Waterfall=Je;
//# sourceMappingURL=index.js.map
